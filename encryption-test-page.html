<!DOCTYPE html>
<html>
<head>
  <title>Sample Page</title>
</head>
<body>
   
  <h1>Add my pet to inventory</h1>

  <!-- index.html -->
  <form id="myForm">
    <label for="category_name">Category:</label>
    <input type="text" name="category_name" placeholder="category" value="Dog" />
    <br><br>

    <label for="name">Name:</label>
    <input type="text" name="name" placeholder="name" value="Charlie" />
    <br><br>

    <label for="photoUrls">Photo URL:</label>
    <input type="text" name="photoUrls" placeholder="photo url" value="test photo url" />
    <br><br>

    <label for="tag_name">Tag:</label>
    <input type="text" name="tag_name" placeholder="tag" value="cute" />
    <br><br>

    <button type="submit">Submit</button>
  </form>

  <!-- Include the encryption library -->
  <script src="encryption-script.js"></script>

  <script>
    // Handle form submission
    document.getElementById('myForm').addEventListener('submit', function(event) {
      event.preventDefault();

      let form = event.target;
      let formData = new FormData(form);
      let object = {
        "id": 1,
        "category": {
          "id": 1,
          "name": formData.get('category_name')
        },
        "name": formData.get('name'),
        "photoUrls": [formData.get('photoUrls')],
        "tags": [
          {
            "id": 1,
            "name": formData.get('tag_name')
          }
        ],
        "status": "available"
      };

      let json = JSON.stringify(object);

      // Send the form data as an XHR POST request or fetch POST request
      // The encryption will be automatically handled by the 'encryption-library.js'
      // Replace 'https://api.example.com/endpoint' with your actual API endpoint
      let apiUrl = 'https://customers-central-vm-5.zta-gateway.com/v2/pet';

      // Using XMLHttpRequest
      let xhr = new XMLHttpRequest();
      xhr.open('POST', apiUrl, true);
      xhr.setRequestHeader('Content-Type', 'application/json');
	  xhr.setRequestHeader('Authorization', 'Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjVERjBBN0E0Q0IxMERDMTA4QUM5REU3OUZEQjI5QzgzIiwidHlwIjoiYXQrand0In0.eyJuYmYiOjE2OTA5ODQ4NDgsImV4cCI6MTY5MDk4ODQ0OCwiaXNzIjoiaHR0cHM6Ly9jdXN0b21lcnMtY2VudHJhbC12bS01Lnp0YS1nYXRld2F5LmNvbToyMTAyOSIsImF1ZCI6WyJJbnZvaWNlIiwiUHJvZHVjdCIsIndlYmFwaSJdLCJjbGllbnRfaWQiOiJjbGllbnQiLCJqdGkiOiI5OTM0QTQ5NkUxNkY2OTE3MDNGRUM1OTA4QUZCMUUxMCIsImlhdCI6MTY5MDk4NDg0OCwic2NvcGUiOlsiaW52b2ljZXM6cmVhZCIsImludm9pY2VzOndyaXRlIiwicHJvZHVjdHM6cmVhZCIsInByb2R1Y3RzOndyaXRlIiwid2ViYXBpOnJlYWQiLCJ3ZWJhcGk6d3JpdGUiXX0.Ug2a6S6vm7GgkHpg_9vihY_QO-DAWyiStNfHLQ1qWVttLwSGw0s4lIoyM2oOMcZIZUUYjd9AxmA31pN3ZmqkKhp6F2lxhEkJZDL1d-PX8azAr6EdFsVN4e-hw2Z32KP6GEQE6O5kZhlZ4k6xPDskAEZHgCn0RAJYClsonIfd4X6hHO1MCQTZddNPv5AqKL6zBrmMBQr1gBkq14U0xl0GDDoQSlAxiFbNAXhws5pAuziJOCXC49rfXnBoh3h6eXT3H4OW_1recKD6a_PUQD6uU6Gh7Px8NzIcRbGgJ2wulzgM9jWArxL9jlJapgd9VgiSB06QeZ8ZzlDmc8rS13W5uA');
	 
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            //console.log('XHR Response:', xhr.responseText);
          } else {
            console.error('XHR Error:', xhr.status);
          }
        }
      };
      xhr.send(json);

      // Using fetch
      // fetch(apiUrl, {
      //   method: 'POST',
      //   headers: {
      //     'Content-Type': 'application/json'
      //   },
      //   body: json
      // })
      // .then(response => response.json())
      // .then(data => {
      //   console.log('Fetch Response:', data);
      // })
      // .catch(error => {
      //   console.error('Fetch Error:', error);
      // });
    });
  </script>

 <div style="position: relative;">
    <p style="position: absolute; top: 190px;">Page Version: 1</p>
  </div>

</body>
</html>
